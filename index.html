<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Workout Tracker</title>
  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    /* Compact rep circles */
    .rep-circle {
      width: 36px;
      height: 36px;
      border-radius: 9999px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.14s ease;
      border: 2px solid #e5e7eb;
      background: #f3f4f6;
      color: #9ca3af;
      user-select: none;
      line-height: 1;
    }

    .rep-circle:hover:not(.selected){
      border-color: #60a5fa;
      background: #eff6ff;
      color: #2563eb;
      transform: translateY(-2px);
    }

    .rep-circle.selected{
      background: #fff;
      color: #111827;
      border-color: #60a5fa;
      box-shadow: 0 0 0 6px rgba(96,165,250,0.10);
      transform: scale(1.02);
    }

    .rep-circle.recommended { font-weight:700; color:#374151; }

    .reps-wrap { display:flex; gap:0.4rem; flex-wrap:wrap; align-items:center; }

    /* History/day accordion */
    .day-accordion { background: #fff; border-radius: 12px; overflow: hidden; box-shadow: 0 1px 2px rgba(0,0,0,0.04); }
    .day-item { border-bottom: 1px solid #eef2f7; }
    .day-button { width:100%; padding: 12px 14px; display:flex; justify-content:space-between; align-items:center; gap:12px; border:0; background:transparent; cursor:pointer; text-align:left; }
    .day-button:hover { background: #fbfdff; }
    .day-details { padding: 10px 14px 16px 14px; display:none; }
    .day-details.open { display:block; }
    .day-header { font-weight:700; font-size:14px; }
    .meta { color:#6b7280; font-size:12px; }

    .core-header, .iso-header { font-size: 13px; color:#6b7280; font-weight:700; padding:8px 2px; }

    /* small table-like list for exercises within a day */
    .exercise-row { display:flex; justify-content:space-between; gap:12px; padding:8px 0; align-items:center; border-bottom:1px dashed #f3f4f6; }
    .exercise-row:last-child { border-bottom: 0; }
    .exercise-name { font-weight:600; }
    .set-meta { color:#6b7280; font-size:13px; }
    .small-pill { background:#f8fafc; color:#374151; padding:6px 8px; border-radius:8px; font-size:13px; }
  </style>
</head>
<body class="min-h-screen bg-gray-50">

  <!-- Tabs -->
  <nav class="bg-white shadow-sm sticky top-0 z-50">
    <div class="max-w-md mx-auto flex">
      <button onclick="setTab('day1')" id="tab-day1" class="flex-1 py-4 font-semibold text-blue-600 border-b-2 border-blue-600">Day 1</button>
      <button onclick="setTab('day2')" id="tab-day2" class="flex-1 py-4 font-medium text-gray-500 border-b-2 border-transparent">Day 2</button>
      <button onclick="setTab('history')" id="tab-history" class="flex-1 py-4 font-medium text-gray-500 border-b-2 border-transparent">History</button>
    </div>
  </nav>

  <main class="max-w-md mx-auto p-4 pb-32">

    <!-- Day 1 -->
    <div id="day1" class="space-y-6">
      <div class="text-center -mt-2 mb-6">
        <h1 class="text-3xl font-bold text-gray-900">Day 1</h1>
        <p class="text-gray-600">Track your weights & reps.</p>
      </div>

      <div class="text-center mb-6">
        <span class="bg-blue-100 text-blue-800 px-4 py-1.5 rounded-full text-sm font-bold tracking-wider">CORE</span>
      </div>

      <!-- Squats -->
      <section class="bg-white rounded-2xl shadow-sm p-6">
        <h2 class="text-xl font-bold mb-1">Squats</h2>
        <p class="text-sm text-gray-600 mb-5">Barbell Squat</p>
        <div class="space-y-6">
          <div>
            <p class="font-medium mb-3 text-gray-700">SET 1</p>
            <div class="flex items-center gap-4 flex-wrap">
              <input type="number" placeholder="lbs" class="w-28 px-4 py-3 border border-gray-300 rounded-xl text-center text-lg outline-none" data-ex="squats" data-set="1">
              <div class="reps-wrap" data-reps="squats-1">
                <div class="rep-circle" data-rep="4">4</div>
                <div class="rep-circle" data-rep="5">5</div>
                <div class="rep-circle" data-rep="6">6</div>
                <div class="rep-circle" data-rep="7">7</div>
                <div class="rep-circle" data-rep="8">8</div>
                <div class="rep-circle" data-rep="9">9</div>
                <div class="rep-circle" data-rep="10">10</div>
              </div>
            </div>
          </div>

          <div>
            <p class="font-medium mb-3 text-gray-700">SET 2</p>
            <div class="flex items-center gap-4 flex-wrap">
              <input type="number" placeholder="lbs" class="w-28 px-4 py-3 border border-gray-300 rounded-xl text-center text-lg outline-none" data-ex="squats" data-set="2">
              <div class="reps-wrap" data-reps="squats-2">
                <div class="rep-circle" data-rep="6">6</div>
                <div class="rep-circle" data-rep="7">7</div>
                <div class="rep-circle" data-rep="8">8</div>
                <div class="rep-circle" data-rep="9">9</div>
                <div class="rep-circle" data-rep="10">10</div>
                <div class="rep-circle" data-rep="11">11</div>
                <div class="rep-circle" data-rep="12">12</div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Deadlift -->
      <section class="bg-white rounded-2xl shadow-sm p-6">
        <h2 class="text-xl font-bold mb-1">Hip Hinges</h2>
        <p class="text-sm text-gray-600 mb-5">Deadlift</p>
        <div class="space-y-6">
          <div>
            <p class="font-medium mb-3 text-gray-700">SET 1</p>
            <div class="flex items-center gap-4 flex-wrap">
              <input type="number" placeholder="lbs" class="w-28 px-4 py-3 border border-gray-300 rounded-xl text-center text-lg outline-none" data-ex="deadlift" data-set="1">
              <div class="reps-wrap" data-reps="deadlift-1">
                <div class="rep-circle" data-rep="4">4</div><div class="rep-circle" data-rep="5">5</div><div class="rep-circle" data-rep="6">6</div>
                <div class="rep-circle" data-rep="7">7</div><div class="rep-circle" data-rep="8">8</div><div class="rep-circle" data-rep="9">9</div><div class="rep-circle" data-rep="10">10</div>
              </div>
            </div>
          </div>

          <div>
            <p class="font-medium mb-3 text-gray-700">SET 2</p>
            <div class="flex items-center gap-4 flex-wrap">
              <input type="number" placeholder="lbs" class="w-28 px-4 py-3 border border-gray-300 rounded-xl text-center text-lg outline-none" data-ex="deadlift" data-set="2">
              <div class="reps-wrap" data-reps="deadlift-2">
                <div class="rep-circle" data-rep="6">6</div><div class="rep-circle" data-rep="7">7</div><div class="rep-circle" data-rep="8">8</div>
                <div class="rep-circle" data-rep="9">9</div><div class="rep-circle" data-rep="10">10</div><div class="rep-circle" data-rep="11">11</div><div class="rep-circle" data-rep="12">12</div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Pull-ups -->
      <section class="bg-white rounded-2xl shadow-sm p-6">
        <h2 class="text-xl font-bold mb-1">Vertical Pulls</h2>
        <p class="text-sm text-gray-600 mb-5">Pull-ups</p>
        <div class="space-y-6">
          <div>
            <p class="font-medium mb-3 text-gray-700">SET 1</p>
            <div class="flex items-center gap-4 flex-wrap">
              <input type="number" placeholder="lbs" class="w-28 px-4 py-3 border border-gray-300 rounded-xl text-center text-lg outline-none" data-ex="pullups" data-set="1">
              <div class="reps-wrap" data-reps="pullups-1">
                <div class="rep-circle" data-rep="4">4</div><div class="rep-circle" data-rep="5">5</div><div class="rep-circle" data-rep="6">6</div>
                <div class="rep-circle" data-rep="7">7</div><div class="rep-circle" data-rep="8">8</div><div class="rep-circle" data-rep="9">9</div><div class="rep-circle" data-rep="10">10</div>
              </div>
            </div>
          </div>

          <div>
            <p class="font-medium mb-3 text-gray-700">SET 2</p>
            <div class="flex items-center gap-4 flex-wrap">
              <input type="number" placeholder="lbs" class="w-28 px-4 py-3 border border-gray-300 rounded-xl text-center text-lg outline-none" data-ex="pullups" data-set="2">
              <div class="reps-wrap" data-reps="pullups-2">
                <div class="rep-circle" data-rep="6">6</div><div class="rep-circle" data-rep="7">7</div><div class="rep-circle" data-rep="8">8</div>
                <div class="rep-circle" data-rep="9">9</div><div class="rep-circle" data-rep="10">10</div><div class="rep-circle" data-rep="11">11</div><div class="rep-circle" data-rep="12">12</div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- ISOLATION header -->
      <div class="text-center mb-6">
        <span class="bg-gray-100 text-gray-700 px-4 py-1.5 rounded-full text-sm font-bold tracking-wider">ISOLATION</span>
      </div>

      <!-- Biceps: Curls -->
      <section class="bg-white rounded-2xl shadow-sm p-6">
        <h2 class="text-xl font-bold mb-1">Biceps</h2>
        <p class="text-sm text-gray-600 mb-5">Curls</p>
        <div class="space-y-6">
          <div>
            <p class="font-medium mb-3 text-gray-700">SET 1</p>
            <div class="flex items-center gap-4 flex-wrap">
              <input type="number" placeholder="lbs" class="w-28 px-4 py-3 border border-gray-300 rounded-xl text-center text-lg outline-none" data-ex="curls" data-set="1">
              <div class="reps-wrap" data-reps="curls-1">
                <div class="rep-circle" data-rep="4">4</div><div class="rep-circle" data-rep="5">5</div><div class="rep-circle" data-rep="6">6</div>
                <div class="rep-circle" data-rep="7">7</div><div class="rep-circle" data-rep="8">8</div><div class="rep-circle" data-rep="9">9</div><div class="rep-circle" data-rep="10">10</div>
              </div>
            </div>
          </div>

          <div>
            <p class="font-medium mb-3 text-gray-700">SET 2</p>
            <div class="flex items-center gap-4 flex-wrap">
              <input type="number" placeholder="lbs" class="w-28 px-4 py-3 border border-gray-300 rounded-xl text-center text-lg outline-none" data-ex="curls" data-set="2">
              <div class="reps-wrap" data-reps="curls-2">
                <div class="rep-circle" data-rep="6">6</div><div class="rep-circle" data-rep="7">7</div><div class="rep-circle" data-rep="8">8</div>
                <div class="rep-circle" data-rep="9">9</div><div class="rep-circle" data-rep="10">10</div><div class="rep-circle" data-rep="11">11</div><div class="rep-circle" data-rep="12">12</div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Triceps -->
      <section class="bg-white rounded-2xl shadow-sm p-6">
        <h2 class="text-xl font-bold mb-1">Triceps</h2>
        <p class="text-sm text-gray-600 mb-5">Skull-crushers</p>
        <div class="space-y-6">
          <div>
            <p class="font-medium mb-3 text-gray-700">SET 1</p>
            <div class="flex items-center gap-4 flex-wrap">
              <input type="number" placeholder="lbs" class="w-28 px-4 py-3 border border-gray-300 rounded-xl text-center text-lg outline-none" data-ex="skullcrushers" data-set="1">
              <div class="reps-wrap" data-reps="skullcrushers-1">
                <div class="rep-circle" data-rep="4">4</div><div class="rep-circle" data-rep="5">5</div><div class="rep-circle" data-rep="6">6</div>
                <div class="rep-circle" data-rep="7">7</div><div class="rep-circle" data-rep="8">8</div><div class="rep-circle" data-rep="9">9</div><div class="rep-circle" data-rep="10">10</div>
              </div>
            </div>
          </div>

          <div>
            <p class="font-medium mb-3 text-gray-700">SET 2</p>
            <div class="flex items-center gap-4 flex-wrap">
              <input type="number" placeholder="lbs" class="w-28 px-4 py-3 border border-gray-300 rounded-xl text-center text-lg outline-none" data-ex="skullcrushers" data-set="2">
              <div class="reps-wrap" data-reps="skullcrushers-2">
                <div class="rep-circle" data-rep="6">6</div><div class="rep-circle" data-rep="7">7</div><div class="rep-circle" data-rep="8">8</div>
                <div class="rep-circle" data-rep="9">9</div><div class="rep-circle" data-rep="10">10</div><div class="rep-circle" data-rep="11">11</div><div class="rep-circle" data-rep="12">12</div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Calves -->
      <section class="bg-white rounded-2xl shadow-sm p-6">
        <h2 class="text-xl font-bold mb-1">Calves</h2>
        <p class="text-sm text-gray-600 mb-5">Calf Raises</p>
        <div class="space-y-6">
          <div>
            <p class="font-medium mb-3 text-gray-700">SET 1</p>
            <div class="flex items-center gap-4 flex-wrap">
              <input type="number" placeholder="lbs" class="w-28 px-4 py-3 border border-gray-300 rounded-xl text-center text-lg outline-none" data-ex="calfraises" data-set="1">
              <div class="reps-wrap" data-reps="calfraises-1">
                <div class="rep-circle" data-rep="4">4</div><div class="rep-circle" data-rep="5">5</div><div class="rep-circle" data-rep="6">6</div>
                <div class="rep-circle" data-rep="7">7</div><div class="rep-circle" data-rep="8">8</div><div class="rep-circle" data-rep="9">9</div><div class="rep-circle" data-rep="10">10</div>
              </div>
            </div>
          </div>

          <div>
            <p class="font-medium mb-3 text-gray-700">SET 2</p>
            <div class="flex items-center gap-4 flex-wrap">
              <input type="number" placeholder="lbs" class="w-28 px-4 py-3 border border-gray-300 rounded-xl text-center text-lg outline-none" data-ex="calfraises" data-set="2">
              <div class="reps-wrap" data-reps="calfraises-2">
                <div class="rep-circle" data-rep="6">6</div><div class="rep-circle" data-rep="7">7</div><div class="rep-circle" data-rep="8">8</div>
                <div class="rep-circle" data-rep="9">9</div><div class="rep-circle" data-rep="10">10</div><div class="rep-circle" data-rep="11">11</div><div class="rep-circle" data-rep="12">12</div>
              </div>
            </div>
          </div>
        </div>
      </section>
    </div>

    <!-- Day 2 -->
    <div id="day2" class="hidden space-y-6">
      <div class="text-center -mt-2 mb-6">
        <h1 class="text-3xl font-bold text-gray-900">Day 2</h1>
        <p class="text-gray-600">Track your weights & reps.</p>
      </div>

      <div class="text-center mb-6">
        <span class="bg-blue-100 text-blue-800 px-4 py-1.5 rounded-full text-sm font-bold tracking-wider">CORE</span>
      </div>

      <!-- Bench Press -->
      <section class="bg-white rounded-2xl shadow-sm p-6">
        <h2 class="text-xl font-bold mb-1">Horizontal Pushes</h2>
        <p class="text-sm text-gray-600 mb-5">Bench Press</p>
        <div class="space-y-6">
          <div>
            <p class="font-medium mb-3 text-gray-700">SET 1</p>
            <div class="flex items-center gap-4 flex-wrap">
              <input type="number" placeholder="lbs" class="w-28 px-4 py-3 border border-gray-300 rounded-xl text-center text-lg outline-none" data-ex="benchpress" data-set="1">
              <div class="reps-wrap" data-reps="benchpress-1">
                <div class="rep-circle" data-rep="4">4</div><div class="rep-circle" data-rep="5">5</div><div class="rep-circle" data-rep="6">6</div>
                <div class="rep-circle" data-rep="7">7</div><div class="rep-circle" data-rep="8">8</div><div class="rep-circle" data-rep="9">9</div><div class="rep-circle" data-rep="10">10</div>
              </div>
            </div>
          </div>
          <div>
            <p class="font-medium mb-3 text-gray-700">SET 2</p>
            <div class="flex items-center gap-4 flex-wrap">
              <input type="number" placeholder="lbs" class="w-28 px-4 py-3 border border-gray-300 rounded-xl text-center text-lg outline-none" data-ex="benchpress" data-set="2">
              <div class="reps-wrap" data-reps="benchpress-2">
                <div class="rep-circle" data-rep="6">6</div><div class="rep-circle" data-rep="7">7</div><div class="rep-circle" data-rep="8">8</div>
                <div class="rep-circle" data-rep="9">9</div><div class="rep-circle" data-rep="10">10</div><div class="rep-circle" data-rep="11">11</div><div class="rep-circle" data-rep="12">12</div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Seated DB Press -->
      <section class="bg-white rounded-2xl shadow-sm p-6">
        <h2 class="text-xl font-bold mb-1">Vertical Pushes</h2>
        <p class="text-sm text-gray-600 mb-5">Seated Dumbbell Press</p>
        <div class="space-y-6">
          <div>
            <p class="font-medium mb-3 text-gray-700">SET 1</p>
            <div class="flex items-center gap-4 flex-wrap">
              <input type="number" placeholder="lbs" class="w-28 px-4 py-3 border border-gray-300 rounded-xl text-center text-lg outline-none" data-ex="seatedpress" data-set="1">
              <div class="reps-wrap" data-reps="seatedpress-1">
                <div class="rep-circle" data-rep="4">4</div><div class="rep-circle" data-rep="5">5</div><div class="rep-circle" data-rep="6">6</div>
                <div class="rep-circle" data-rep="7">7</div><div class="rep-circle" data-rep="8">8</div><div class="rep-circle" data-rep="9">9</div><div class="rep-circle" data-rep="10">10</div>
              </div>
            </div>
          </div>

          <div>
            <p class="font-medium mb-3 text-gray-700">SET 2</p>
            <div class="flex items-center gap-4 flex-wrap">
              <input type="number" placeholder="lbs" class="w-28 px-4 py-3 border border-gray-300 rounded-xl text-center text-lg outline-none" data-ex="seatedpress" data-set="2">
              <div class="reps-wrap" data-reps="seatedpress-2">
                <div class="rep-circle" data-rep="6">6</div><div class="rep-circle" data-rep="7">7</div><div class="rep-circle" data-rep="8">8</div>
                <div class="rep-circle" data-rep="9">9</div><div class="rep-circle" data-rep="10">10</div><div class="rep-circle" data-rep="11">11</div><div class="rep-circle" data-rep="12">12</div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Cable Rows -->
      <section class="bg-white rounded-2xl shadow-sm p-6">
        <h2 class="text-xl font-bold mb-1">Horizontal Pulls</h2>
        <p class="text-sm text-gray-600 mb-5">Cable Rows</p>
        <div class="space-y-6">
          <div>
            <p class="font-medium mb-3 text-gray-700">SET 1</p>
            <div class="flex items-center gap-4 flex-wrap">
              <input type="number" placeholder="lbs" class="w-28 px-4 py-3 border border-gray-300 rounded-xl text-center text-lg outline-none" data-ex="cablerows" data-set="1">
              <div class="reps-wrap" data-reps="cablerows-1">
                <div class="rep-circle" data-rep="4">4</div><div class="rep-circle" data-rep="5">5</div><div class="rep-circle" data-rep="6">6</div>
                <div class="rep-circle" data-rep="7">7</div><div class="rep-circle" data-rep="8">8</div><div class="rep-circle" data-rep="9">9</div><div class="rep-circle" data-rep="10">10</div>
              </div>
            </div>
          </div>

          <div>
            <p class="font-medium mb-3 text-gray-700">SET 2</p>
            <div class="flex items-center gap-4 flex-wrap">
              <input type="number" placeholder="lbs" class="w-28 px-4 py-3 border border-gray-300 rounded-xl text-center text-lg outline-none" data-ex="cablerows" data-set="2">
              <div class="reps-wrap" data-reps="cablerows-2">
                <div class="rep-circle" data-rep="6">6</div><div class="rep-circle" data-rep="7">7</div><div class="rep-circle" data-rep="8">8</div>
                <div class="rep-circle" data-rep="9">9</div><div class="rep-circle" data-rep="10">10</div><div class="rep-circle" data-rep="11">11</div><div class="rep-circle" data-rep="12">12</div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- ISOLATION header before Abs -->
      <div class="text-center mb-6">
        <span class="bg-gray-100 text-gray-700 px-4 py-1.5 rounded-full text-sm font-bold tracking-wider">ISOLATION</span>
      </div>

      <!-- Abs -->
      <section class="bg-white rounded-2xl shadow-sm p-6">
        <h2 class="text-xl font-bold mb-1">Abs</h2>
        <p class="text-sm text-gray-600 mb-5">Hanging Leg Lifts</p>
        <div class="space-y-6">
          <div>
            <p class="font-medium mb-3 text-gray-700">SET 1</p>
            <div class="reps-wrap" data-reps="leglifts-1">
              <div class="rep-circle" data-rep="4">4</div><div class="rep-circle" data-rep="5">5</div><div class="rep-circle" data-rep="6">6</div>
              <div class="rep-circle" data-rep="7">7</div><div class="rep-circle" data-rep="8">8</div><div class="rep-circle" data-rep="9">9</div><div class="rep-circle" data-rep="10">10</div>
            </div>
          </div>

          <div>
            <p class="font-medium mb-3 text-gray-700">SET 2</p>
            <div class="reps-wrap" data-reps="leglifts-2">
              <div class="rep-circle" data-rep="6">6</div><div class="rep-circle" data-rep="7">7</div><div class="rep-circle" data-rep="8">8</div>
              <div class="rep-circle" data-rep="9">9</div><div class="rep-circle" data-rep="10">10</div><div class="rep-circle" data-rep="11">11</div><div class="rep-circle" data-rep="12">12</div>
            </div>
          </div>
        </div>
      </section>

      <!-- Rear Delts -->
      <section class="bg-white rounded-2xl shadow-sm p-6">
        <h2 class="text-xl font-bold mb-1">Rear Delts</h2>
        <p class="text-sm text-gray-600 mb-5">Cable Pulls</p>
        <div class="space-y-6">
          <div>
            <p class="font-medium mb-3 text-gray-700">SET 1</p>
            <div class="flex items-center gap-4 flex-wrap">
              <input type="number" placeholder="lbs" class="w-28 px-4 py-3 border border-gray-300 rounded-xl text-center text-lg outline-none" data-ex="cablepulls" data-set="1">
              <div class="reps-wrap" data-reps="cablepulls-1">
                <div class="rep-circle" data-rep="4">4</div><div class="rep-circle" data-rep="5">5</div><div class="rep-circle" data-rep="6">6</div>
                <div class="rep-circle" data-rep="7">7</div><div class="rep-circle" data-rep="8">8</div><div class="rep-circle" data-rep="9">9</div><div class="rep-circle" data-rep="10">10</div>
              </div>
            </div>
          </div>

          <div>
            <p class="font-medium mb-3 text-gray-700">SET 2</p>
            <div class="flex items-center gap-4 flex-wrap">
              <input type="number" placeholder="lbs" class="w-28 px-4 py-3 border border-gray-300 rounded-xl text-center text-lg outline-none" data-ex="cablepulls" data-set="2">
              <div class="reps-wrap" data-reps="cablepulls-2">
                <div class="rep-circle" data-rep="6">6</div><div class="rep-circle" data-rep="7">7</div><div class="rep-circle" data-rep="8">8</div>
                <div class="rep-circle" data-rep="9">9</div><div class="rep-circle" data-rep="10">10</div><div class="rep-circle" data-rep="11">11</div><div class="rep-circle" data-rep="12">12</div>
              </div>
            </div>
          </div>
        </div>
      </section>
    </div>

    <!-- History -->
    <div id="history" class="hidden space-y-6">
      <div class="text-center -mt-2 mb-6">
        <h1 class="text-3xl font-bold text-gray-900">History</h1>
        <p class="text-gray-600">Daily summary of saved workouts</p>
      </div>

      <div class="flex items-center gap-3 justify-center mb-3">
        <button id="expand-all" class="text-sm text-blue-600">Expand all</button>
        <button id="collapse-all" class="text-sm text-gray-600">Collapse all</button>
      </div>

      <div id="history-list" class="space-y-4"></div>
    </div>
  </main>

  <!-- Complete Button -->
  <div id="complete-btn" class="fixed bottom-6 left-1/2 -translate-x-1/2 w-[calc(100%-3rem)] max-w-md z-40">
    <button onclick="completeWorkout()" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-5 rounded-full shadow-2xl flex items-center justify-center gap-3 text-lg transition-colors">
      <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/></svg>
      Complete Workout
    </button>
  </div>

  <script>
    const STORAGE_KEY = 'workoutLogFinal';
    let currentDay = 'day1';

    // exercise order used throughout the app (keeps UI deterministic)
    const EXERCISE_ORDER = ['squats','deadlift','pullups','curls','skullcrushers','calfraises','benchpress','seatedpress','cablerows','leglifts','cablepulls'];

    // initial wiring
    document.addEventListener('click', e => {
      if (e.target.classList.contains('rep-circle')) {
        const container = e.target.closest('[data-reps]');
        if (!container) return;
        container.querySelectorAll('.rep-circle').forEach(c => c.classList.remove('selected'));
        e.target.classList.add('selected');
      }
    });

    // keyboard access
    document.addEventListener('keydown', e => {
      if ((e.key === 'Enter' || e.key === ' ') && document.activeElement?.classList?.contains('rep-circle')) {
        document.activeElement.click();
        e.preventDefault();
      }
    });

    // make rep circles focusable
    function makeRepFocusable(){
      document.querySelectorAll('.rep-circle').forEach(el => el.setAttribute('tabindex','0'));
    }

    // mark recommended reps: set1 = 6..8, set2 = 8..10
    function markRecommendedReps(){
      document.querySelectorAll('[data-reps]').forEach(container => {
        const id = container.dataset.reps || '';
        const isSet1 = id.endsWith('-1');
        const isSet2 = id.endsWith('-2');
        container.querySelectorAll('.rep-circle').forEach(el => {
          el.classList.remove('recommended');
          const r = Number(el.dataset.rep);
          if (isSet1 && r >= 6 && r <= 8) el.classList.add('recommended');
          if (isSet2 && r >= 8 && r <= 10) el.classList.add('recommended');
          if (!isSet1 && !isSet2 && r >= 6 && r <= 10) el.classList.add('recommended');
        });
      });
    }

    // load last used weights / reps for current day tab
    function loadPreviousWeights(){
      const logs = JSON.parse(localStorage.getItem(STORAGE_KEY) || '[]');
      const last = logs.slice().reverse().find(l => l.day === currentDay);
      if (!last) return;
      last.data.forEach(ex => {
        if (ex.set1?.weight) document.querySelector(`[data-ex="${ex.id}"][data-set="1"]`)?.setAttribute('value', ex.set1.weight);
        if (ex.set2?.weight) document.querySelector(`[data-ex="${ex.id}"][data-set="2"]`)?.setAttribute('value', ex.set2.weight);
        if (ex.set1?.reps) selectRep(`${ex.id}-1`, ex.set1.reps);
        if (ex.set2?.reps) selectRep(`${ex.id}-2`, ex.set2.reps);
      });
    }

    function selectRep(containerId, value){
      const container = document.querySelector(`[data-reps="${containerId}"]`);
      if (!container) return;
      container.querySelectorAll('.rep-circle').forEach(c => c.classList.toggle('selected', c.dataset.rep == value));
    }

    function setTab(tab){
      document.getElementById('day1').classList.toggle('hidden', tab !== 'day1');
      document.getElementById('day2').classList.toggle('hidden', tab !== 'day2');
      document.getElementById('history').classList.toggle('hidden', tab !== 'history');
      document.getElementById('complete-btn').classList.toggle('hidden', tab === 'history');

      document.querySelectorAll('button[id^="tab-"]').forEach(b => {
        b.classList.toggle('text-blue-600', b.id === `tab-${tab}`);
        b.classList.toggle('border-blue-600', b.id === `tab-${tab}`);
        b.classList.toggle('font-semibold', b.id === `tab-${tab}`);
        b.classList.toggle('text-gray-500', b.id !== `tab-${tab}`);
        b.classList.toggle('border-transparent', b.id !== `tab-${tab}`);
        b.classList.toggle('font-medium', b.id !== `tab-${tab}`);
      });

      if (tab !== 'history') {
        currentDay = tab;
        loadPreviousWeights();
      } else {
        renderHistory();
      }
    }

    // Save current workout into localStorage
    function completeWorkout(){
      const data = [];
      EXERCISE_ORDER.forEach(id => {
        const w1 = document.querySelector(`[data-ex="${id}"][data-set="1"]`)?.value.trim() || null;
        const w2 = document.querySelector(`[data-ex="${id}"][data-set="2"]`)?.value.trim() || null;
        const r1 = document.querySelector(`[data-reps="${id}-1"] .selected`)?.dataset.rep || null;
        const r2 = document.querySelector(`[data-reps="${id}-2"] .selected`)?.dataset.rep || null;
        if (w1 || w2 || r1 || r2) data.push({id, set1:{weight:w1,reps:r1}, set2:{weight:w2,reps:r2}});
      });

      if (data.length === 0) { alert("Add at least one set!"); return; }

      const logs = JSON.parse(localStorage.getItem(STORAGE_KEY) || '[]');
      logs.push({day: currentDay, date: new Date().toISOString(), data});
      localStorage.setItem(STORAGE_KEY, JSON.stringify(logs));

      // feedback & reset
      alert("Workout saved!");
      document.querySelectorAll('input[type=number]').forEach(i => i.value = '');
      document.querySelectorAll('.rep-circle').forEach(c => c.classList.remove('selected'));
      setTab('history');
    }

    // --- History rendering: collapsible daily summary of exercises with weight & reps ---
    function renderHistory(){
      const stored = JSON.parse(localStorage.getItem(STORAGE_KEY) || '[]');
      const list = document.getElementById('history-list');
      list.innerHTML = '';

      if (!stored.length) {
        list.innerHTML = '<p class="text-center text-gray-500 py-10">No workouts yet</p>';
        return;
      }

      // Group logs by day (date-only in user's locale)
      // We'll operate in reverse chronological order (newest first)
      const byDate = {};
      stored.slice().reverse().forEach(entry => {
        // group key: ISO date (yyyy-mm-dd) based on local date-time of entry
        const d = new Date(entry.date);
        // use local date string (so user's locale groups sensibly)
        const key = d.toLocaleDateString();
        if (!byDate[key]) byDate[key] = [];
        byDate[key].push(entry);
      });

      // Build accordion: one item per date
      Object.entries(byDate).forEach(([dateLabel, entries]) => {
        const item = document.createElement('div');
        item.className = 'day-item';

        const btn = document.createElement('button');
        btn.className = 'day-button';
        btn.type = 'button';

        const left = document.createElement('div');
        left.innerHTML = `<div class="day-header">${dateLabel}</div><div class="meta">${entries.length} session${entries.length>1?'s':''}</div>`;

        // compute summary counts: total exercises across sessions
        const uniqueExercises = new Set();
        entries.forEach(s => s.data.forEach(ex => uniqueExercises.add(ex.id)));
        const rightMeta = document.createElement('div');
        rightMeta.innerHTML = `<div class="meta">${uniqueExercises.size} exercises</div>`;

        btn.appendChild(left);
        btn.appendChild(rightMeta);

        const details = document.createElement('div');
        details.className = 'day-details';

        // Button actions: toggle details
        btn.addEventListener('click', () => {
          const open = details.classList.toggle('open');
          btn.querySelector('.meta').textContent = open ? `${entries.length} session${entries.length>1?'s':''}` : `${entries.length} session${entries.length>1?'s':''}`;
        });

        // Build a compact list of exercises and the last saved values for that date
        // For clarity we show, per exercise, the latest entry within that date (if multiple sessions that day)
        const exerciseMap = {}; // id -> {set1,set2, lastSessionTime}
        entries.forEach(session => {
          session.data.forEach(ex => {
            // treat each exercise in the order they appeared; prefer later sessions (within that day)
            const existing = exerciseMap[ex.id];
            const sessionTime = new Date(session.date).getTime();
            if (!existing || sessionTime > existing.lastSessionTime) {
              exerciseMap[ex.id] = {
                set1: { weight: ex.set1?.weight || null, reps: ex.set1?.reps || null },
                set2: { weight: ex.set2?.weight || null, reps: ex.set2?.reps || null },
                lastSessionTime: sessionTime
              };
            }
          });
        });

        // Prepare an ordered list using EXERCISE_ORDER (so UI is stable)
        const exercisesContainer = document.createElement('div');
        exercisesContainer.className = 'pt-2';

        EXERCISE_ORDER.forEach(exId => {
          const ex = exerciseMap[exId];
          if (!ex) return;
          const row = document.createElement('div');
          row.className = 'exercise-row';
          const leftName = document.createElement('div');
          leftName.innerHTML = `<div class="exercise-name">${formatExerciseId(exId)}</div><div class="set-meta">${new Date(ex.lastSessionTime).toLocaleTimeString()}</div>`;
          const rightData = document.createElement('div');
          rightData.style.textAlign = 'right';
          rightData.innerHTML = `
            <div class="small-pill">S1: ${ex.set1.weight || '-'} × ${ex.set1.reps || '-'}</div>
            <div style="height:6px"></div>
            <div class="small-pill">S2: ${ex.set2.weight || '-'} × ${ex.set2.reps || '-'}</div>
          `;
          row.appendChild(leftName);
          row.appendChild(rightData);
          exercisesContainer.appendChild(row);
        });

        // Add delete button for this day (removes all sessions for that date)
        const actionsRow = document.createElement('div');
        actionsRow.className = 'flex justify-end gap-3 pt-3';
        const deleteBtn = document.createElement('button');
        deleteBtn.className = 'text-sm text-red-600';
        deleteBtn.textContent = 'Delete day';
        deleteBtn.addEventListener('click', () => {
          if (!confirm('Delete all sessions for ' + dateLabel + '?')) return;
          // remove entries with the same date label
          const remaining = stored.filter(s => {
            const key = new Date(s.date).toLocaleDateString();
            return key !== dateLabel;
          });
          localStorage.setItem(STORAGE_KEY, JSON.stringify(remaining));
          renderHistory();
        });
        actionsRow.appendChild(deleteBtn);

        details.appendChild(exercisesContainer);
        details.appendChild(actionsRow);

        item.appendChild(btn);
        item.appendChild(details);

        const wrapper = document.createElement('div');
        wrapper.className = 'day-accordion';
        wrapper.appendChild(item);
        list.appendChild(wrapper);
      });

      // Wire expand/collapse all
      document.getElementById('expand-all').onclick = () => {
        document.querySelectorAll('.day-details').forEach(d => d.classList.add('open'));
      };
      document.getElementById('collapse-all').onclick = () => {
        document.querySelectorAll('.day-details').forEach(d => d.classList.remove('open'));
      };
    }

    function formatExerciseId(id){
      return {
        squats: 'Squats',
        deadlift: 'Deadlift',
        pullups: 'Pull-ups',
        curls: 'Biceps Curls',
        skullcrushers: 'Skull-crushers',
        calfraises: 'Calf Raises',
        benchpress: 'Bench Press',
        seatedpress: 'Seated DB Press',
        cablerows: 'Cable Rows',
        leglifts: 'Hanging Leg Lifts',
        cablepulls: 'Cable Pulls'
      }[id] || id;
    }

    // initial boot
    makeRepFocusable();
    markRecommendedReps();
    setTab('day1');
  </script>
</body>
</html>
